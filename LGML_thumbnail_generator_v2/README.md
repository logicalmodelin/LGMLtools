# BlogHeader画像等をAEテンプレートから作成する ver.2

## ツール動作仕様

テンプレートにtomlファイルで内容を流し込み、サムネイル画像などを出力するコマンド。
tomlファイルを引数で受け付ける。tomlファイルには以下の情報が含まれる。

* テンプレートフォルダパス
* アイコンIDのリスト
* 背景画像ファイルパス
* タイトル文言
* テキスト文言
* アイコン画像フォルダ
* フォーマットの指定 png / jpeg
* 画像サイズ指定
  * ブログ用ヘッダー画像サイズは 640x427 Youtube用サムネイルサイズは 1280×720
* 画像出力ファイルパス

## デザイン面のレギュレーション

* カラー値やフォント定義などデザインに関する情報をjsonファイルに含めない。テンプレート側にデザインを配置する。
* 背景画像は少し彩度を落とす、テンプレート側で対応する。
* テンプレートはモノクロ＋テーマカラーひとつを基本とする。
* アイコンの色味や形状に関してはバラツキを認める。

## ツール動作仕様

* batファイル + pythonで実装 batファイルへはtomlのドラッグドロップをサポートするため。
* 各種ファイルパスはtomlファイルからの相対パスまたは絶対パスとする。
* アイコン画像フォルダがない場合、tomlファイルのフォルダ/icons をその場所とする。
* 出力フォルダの指定がなければtomlファイルの横に出力する、出力ファイル名の指定が泣ければテンプレート名とする。
* テンプレートフォルダには必要なアセット一式が含まれる。ダミー背景画像とダミーjsonを含んでもいい（上書きされる想定）。
  * template.aep 固定名
  * bg.png または bg.jpg 固定名
  * info.json 固定名
  * icon01.png, icon02.png, icon03.png, icon04.png, icon05.png 固定名
  * その他追加アセット 任意の名前

## 処理の流れ

### python処理1

* テンプレートフォルダを一時ワークフォルダにコピする。
* テンプレートフォルダAEプロジェクト、背景画像とアイコン画像を一時ワークフォルダにコピする。
* アイコン画像は連番（icon01.png ~）にリネームしてワークフォルダに上書きコピーする。
* タイトル・テキスト文言を含んだjsonファイルを動的に生成、ワークフォルダに配置する。
* AEのレンダリングをキックする

### AE処理

* 背景画像、アイコン画像を相対読み込みする。
* 文言はjsonから読み込む。
* 第一フレームをレンダリングする

### python処理2

* 出力された画像サイズをリサイズする。
  * 縦横比率が合わない場合、トリムする。
* 出力された画像をtomlで指定されたフォルダ・ファイル名でコピーする。
* 一時ワークフォルダを破棄する。
